## 看一下相对路径绝对路径视频
部门的增删改查
删除部门时判断一下有没有员工


## EL表达式,JSTL
### 1.JavaWeb域对象
- pageContext < request < session < application
```java
//1. 在JSP中作用范围从小到大
	pageContext.setAttribute("pageContext","pageContext");//仅当前页面,*跳转*后无效
	request.setAttribute("request","request");//仅在请求范围内有效,*重定向*后无效
	session.setAttribute("session","session");//会话范围,当前*浏览器*有效
	application.setAttribute("application","application");//servletContext,全局对象,网站启动时就会产生这个变量,*重启服务器*后无效

//2. 都可以使用setAttribute(),getAttribute()
	//out也是JSP自带的对象
	out.print(pageContext.getAttribute("pageContext")+"<br>");
	out.print(request.getAttribute("request")+"<br>");
	out.print(session.getAttribute("session")+"<br>");
	out.print(application.getAttribute("application")+"<br>");
```
### 2. 请求转发域重定向总结
```java
//在JSP中
    //1. 请求转发
    request.getRequestDispatcher("scope1.jsp").forward(request,response);
    //2. 响应重定向
	response.sendRedirect("scope1.jsp");
```
- (补充)转发可以传递任意类型的变量,重定向只能传字符串
- 转发的绝对路径是当前网站的根,重定向的绝对路径是服务器的根目录
1. 请求转发
- (定义不同)客户端发送`请求`,`服务器`收到请求,`代替客户端`将请求转发给目标地址,再将目标地址的返回结果转发给客户端
- (数据共享不同)`客户端`只发送了`一次请求`,请求数据在`服务器`中处理,因为整个过程只有一个request,因此`共享request数据`
- 一个请求会创建一个request对象,如果`一个请求`跨越了`多个Servlet`,这些Servlet可以通过request共享数据(前一个servlet使用setAttribute(),后一个使用getAttribute())
- (最终URL不同)`最终URL`还是之前的URL
- (请求方不同)请求转发是`服务器行为`
2. 请求重定向
- 客户端发送`请求`,`服务器`给客户端发送一个`临时响应头`,里面记载了`需要再次发送请求`(重定向)的`URL地址`,`客户端`收到临时响应头,又向该URL发送了`另一次请求`
- `客户端`发送了`两次`完全不同的请求
- `最终URL`是第二次请求的跳转地址
- 请求重定向服务器只是给客户端返回了一个URL,剩下的都是`客户端行为`
### 3. 获取/传递参数方法总结
- 之前一般都是request域传值
```java
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    //1.获取Request域的数据,获取JSP传过来的所有参数,返回一个Map
    Map<String, String[]> parameterMap = req.getParameterMap();//有的id有多个value
    Map<String,String> params = new HashMap<>();//把String[]拆成单个String,存到一个新的Map里
    //1.1 一个参数处理的例子
    String[] ename = parameterMap.get("ename");
	if(null!=ename && !"".equals(ename[0])) {
		params.put("ename", ename[0]);
	}
	//1.2 获取Session域的数据
	req.getSession().getAttribute("user", user);//session是服务器的对象,可以传数据

    //2.把处理好的数据传给JSP
	EmpService empService = new EmpService();
	PageBean pb = empService.page(params);//一个分页服务需要参数map
	req.setAttribute("pb", pb);//把这个分页服务对象穿给JSP
	//3.给Session域传值
	req.getSession().setAttribute("user", user);
}
```
