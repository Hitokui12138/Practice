# K8sService不能访问的排查流程
- https://mp.weixin.qq.com/s?__biz=MzI0MDQ4MTM5NQ==&amp;mid=2247495993&amp;idx=2&amp;sn=308544621f2390a057bb6471dfacb9c1&amp;chksm=e9189425de6f1d3325f0611f7e8d0bf81941289ac3bfb540c7cc0cd4f5154e1f6d81d0a9a15b&amp;scene=178&amp;cur_album_id=1790241575034290179#rd



# Kubernetes
1. Kubenetes cluster
    1. 一组Master Node
        - 与kubuctl交互,分配对象,调度资源
    2. 一系列Worker Node
2. Master Node
    1. API Server
        - 所有服务访问的唯一入口,提供认证,授权,访问控制,API注册发现
        - 处理用户请求,提供RESTful接口
    2. Scheduler
        - 调度,将Pod调度到对应的机器上
    3. controlelr-manager
        - 控制node等等,维护cluster状态
        - 副本期望数量,故障检测,自动拓展,滚动更新
    4. etcd
        - 用于保存k8s的集群数据库
        - 键值对数据哭
3. Worker Node
    1. kubelet
        - 工作节点执行的agent,管理具体容器的生命周期,管理容器,上报Pod运行状态
        - 也负责Volume和网络管理
    2. kube-proxy
        1. 网络访问代理,也是一个Load Balancer
        2. 将请求分配给node上同一类标签的Pod
        3. 使用防火墙规则(iptable,ipvs)来实现Pod映射
    3. Container Runtime
        - 管理镜像,以及Pod和容器的创建
        - 比如Docker Engine
4. DNS 
    - 一个可选的DNS,为每个Service对象创建DNS,这样让Pod通过DNS访问
# Kubenete的基本对象
1. Pod
    - Kubernetes集群中运行部署应用或服务的最小单位
    - 一个或多个容器的集合
        - 让多个容器在一个Pod中共享网络地址和文件系统(共享网络,共享存储)
2. Service
    - 提供访问Pod内服务的方法
3. Volume
    - cluster的存储卷
4. Namespace
    - 用于集群隔离,命名空间
# Pod
1. Pause容器
    1. 是Pode的跟容器,Pod内多个业务容器共享Pause容器的IP地址
        - Pod内部容器可以使用localHost相互通讯
    2. 再使用Pause去挂接Volume资源

